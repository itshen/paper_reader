<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Reader MCP - 好用的论文搜索 MCP | 让 AI 能够深度阅读学术论文</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Paper Reader MCP 是强大的论文搜索与阅读 MCP 服务。支持 arXiv 论文实时搜索、PDF 转 Markdown 全文阅读、智能排序与分类过滤。完美适配 Cherry Studio、Cursor、Claude Desktop、Kimi CLI 等 AI 客户端，让你的 AI 助手拥有深度阅读学术论文的能力。免费使用，开源免费。">
    <meta name="keywords" content="MCP, Paper Reader, 论文搜索, arXiv, 学术论文, AI助手, Cherry Studio, Cursor, Claude Desktop, Kimi CLI, 论文阅读, PDF转Markdown, Model Context Protocol, 好用的MCP, 论文MCP, 学术MCP">
    <meta name="author" content="洛小山 | Miyang Tech">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://paper.lxshan.com/">
    
    <!-- Open Graph / 社交分享 -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://paper.lxshan.com/">
    <meta property="og:title" content="Paper Reader MCP - 好用的论文搜索 MCP">
    <meta property="og:description" content="让 AI 助手深度阅读学术论文。支持 arXiv 实时搜索、全文阅读、智能排序。完美适配 Cherry Studio、Cursor、Claude Desktop、Kimi CLI。">
    <meta property="og:site_name" content="Paper Reader MCP">
    <meta property="og:locale" content="zh_CN">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Paper Reader MCP - 好用的论文搜索 MCP">
    <meta name="twitter:description" content="让 AI 助手深度阅读学术论文。支持 arXiv 实时搜索、全文阅读、智能排序。完美适配 Kimi CLI。">
    
    <!-- 结构化数据 JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Paper Reader MCP",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Any",
        "description": "好用的论文搜索 MCP 服务，让 AI 助手拥有深度阅读学术论文的能力。支持 arXiv 论文实时搜索、PDF 转 Markdown 全文阅读、智能排序与分类过滤。完美适配 Cherry Studio、Cursor、Claude Desktop、Kimi CLI 等主流 AI 客户端。",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "CNY"
        },
        "author": {
            "@type": "Organization",
            "name": "Miyang Tech (Zhuhai Hengqin) Co., Ltd.",
            "url": "https://luoxiaoshan.cn"
        },
        "featureList": [
            "arXiv 论文实时搜索",
            "PDF 自动转 Markdown",
            "智能排序（相关性+时间）",
            "分类过滤（cs.AI, cs.LG, cs.CV 等）",
            "分页阅读适配 Token 限制",
            "智能缓存系统",
            "完整认证机制"
        ],
        "keywords": "MCP, 论文搜索, arXiv, AI助手, Cherry Studio, Cursor, Claude, Kimi CLI, Model Context Protocol"
    }
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Mode 默认变量 */
            --bg-page: #ffffff;
            --bg-subtle: #f8fafc;
            --bg-card: #ffffff;
            --bg-card-hover: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-tertiary: #94a3b8;
            --border: #e2e8f0;
            --accent: #6366f1;
            --accent-hover: #4f46e5;
            --accent-light: #e0e7ff;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --gradient-hero: radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.15) 0%, transparent 50%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                /* Dark Mode 变量 */
                --bg-page: #0a0a0f;
                --bg-subtle: #11111a;
                --bg-card: #161622;
                --bg-card-hover: #1c1c2e;
                --text-primary: #f8fafc;
                --text-secondary: #94a3b8;
                --text-tertiary: #64748b;
                --border: #2a2a3a;
                --accent: #818cf8;
                --accent-hover: #6366f1;
                --accent-light: rgba(99, 102, 241, 0.15);
                --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
                --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3);
                --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4);
                --gradient-hero: radial-gradient(circle at 50% 0%, rgba(99, 102, 241, 0.2) 0%, transparent 60%);
            }
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Noto Sans SC', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-page);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* 导航栏 */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(var(--bg-page), 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }

        .nav-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 64px;
        }

        .logo {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo svg { width: 24px; height: 24px; color: var(--accent); }

        .nav-links { display: flex; gap: 1.5rem; align-items: center; }
        .nav-link { 
            color: var(--text-secondary); 
            text-decoration: none; 
            font-size: 0.95rem; 
            transition: color 0.2s;
        }
        .nav-link:hover { color: var(--text-primary); }
        .nav-btn {
            background: var(--accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background 0.2s;
        }
        .nav-btn:hover { background: var(--accent-hover); }

        /* Hero 区域 */
        .hero {
            padding: 8rem 0 4rem;
            text-align: center;
            background: var(--gradient-hero);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--accent-light);
            color: var(--accent);
            padding: 0.35rem 1rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }

        h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            line-height: 1.2;
            font-weight: 800;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--accent) 0%, #a855f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 2.5rem;
        }

        .hero-btns {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.39);
        }
        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }
        .btn-outline:hover {
            border-color: var(--text-secondary);
            background: var(--bg-card-hover);
        }

        /* 核心功能 */
        .features { padding: 5rem 0; }
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        .section-title h2 { font-size: 2rem; margin-bottom: 0.5rem; }
        .section-title p { color: var(--text-secondary); }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent);
        }

        .icon-box {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: var(--bg-subtle);
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        .icon-box svg { width: 24px; height: 24px; }

        .card h3 { font-size: 1.25rem; margin-bottom: 0.75rem; }
        .card p { color: var(--text-secondary); font-size: 0.95rem; }

        /* 公众号/Key */
        .cta-section {
            padding: 5rem 0;
            /* 移除突兀的背景色和边框 */
            background: transparent;
            margin: 0;
            border: none;
        }

        .cta-box {
            /* 调整为更轻量的样式 */
            background: linear-gradient(145deg, var(--bg-card), var(--bg-subtle));
            border-radius: 24px;
            padding: 3rem 2rem;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .cta-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), #a855f7);
        }

        .qr-code {
            width: 180px;
            height: 180px;
            border-radius: 12px;
            margin: 1.5rem auto;
            border: 1px solid var(--border);
            padding: 0.5rem;
            background: white;
        }
        
        .qr-code img { width: 100%; height: 100%; object-fit: contain; }

        /* 自行部署 */
        .deploy-section { padding: 4rem 0; }
        .code-block {
            background: #1e1e1e; /* 代码块始终深色 */
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            position: relative;
            text-align: left;
            overflow-x: auto;
        }
        
        .code-block pre {
            color: #d4d4d4;
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
        }

        .copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        .copy-btn:hover { background: rgba(255,255,255,0.2); }

        .steps {
            max-width: 800px;
            margin: 0 auto;
        }
        .step {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .step-num {
            flex-shrink: 0;
            width: 32px;
            height: 32px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* 对话演示 */
        .demo-section {
            padding: 6rem 0;
            background: linear-gradient(to bottom, var(--bg-page), var(--bg-subtle));
            /* 移除生硬的 border-top */
        }

        .demo-chat {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            height: 500px;
            overflow-y: auto;
            padding: 1rem 1rem 2rem 1rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-subtle);
            scroll-behavior: smooth;
        }

        /* 隐藏滚动条但保留功能 */
        .demo-chat::-webkit-scrollbar {
            width: 6px;
        }
        .demo-chat::-webkit-scrollbar-thumb {
            background-color: var(--border);
            border-radius: 3px;
        }
        .demo-chat::-webkit-scrollbar-track {
            background-color: transparent;
        }

        .chat-message {
            display: flex;
            gap: 1rem;
            width: 100%;
            opacity: 0;
            animation: fadeSlideIn 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .chat-message.user { justify-content: flex-end; }
        
        .chat-content-wrapper {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-width: 85%;
            align-items: flex-start;
        }
        
        .chat-message.user .chat-content-wrapper {
            align-items: flex-end;
        }

        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px; /* 方形圆角更像工具 */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .user-avatar { background: var(--accent); color: white; order: 2; }
        .ai-avatar { 
            background: var(--bg-card); 
            border: 1px solid var(--border);
            color: var(--accent); 
        }
        .ai-avatar svg { width: 20px; height: 20px; }

        .chat-bubble {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            font-size: 0.95rem;
            line-height: 1.7;
            box-shadow: var(--shadow-sm);
            color: var(--text-primary);
        }

        .chat-message.user .chat-bubble {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px 12px 2px 12px;
        }

        .chat-message.ai .chat-bubble { 
            border-radius: 2px 12px 12px 12px; 
        }

        /* 工具调用样式 - 模仿 Cherry Studio */
        .tool-call {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.6rem 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-secondary);
            width: 100%;
            box-shadow: var(--shadow-sm);
            opacity: 0;
            animation: fadeSlideIn 0.4s ease forwards;
        }

        .tool-call-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .tool-icon {
            color: var(--text-tertiary);
            display: flex;
            align-items: center;
        }

        .tool-name {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .tool-args {
            color: var(--text-tertiary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }

        .tool-status {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.75rem;
        }
        
        .status-running { color: var(--accent); }
        .status-done { color: var(--success); }

        .spinner {
            width: 12px;
            height: 12px;
            border: 2px solid var(--accent-light);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* 移动端适配 */
        @media (max-width: 768px) {
            .chat-content-wrapper { max-width: 100%; }
            .tool-args { display: none; }
            .demo-section { padding: 3rem 0; }
        }

        /* 底部 */
        footer {
            padding: 3rem 0;
            text-align: center;
            border-top: 1px solid var(--border);
            background: var(--bg-subtle);
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }
        
        .footer-links a { color: var(--text-secondary); text-decoration: none; }
        .footer-links a:hover { color: var(--accent); }
        .copyright { color: var(--text-tertiary); font-size: 0.875rem; }

        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .step { flex-direction: column; gap: 0.5rem; }
            .nav-inner { height: auto; padding: 1rem 0; flex-direction: column; gap: 1rem; }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="container nav-inner">
            <a href="/" class="logo">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 4H7C5.89543 4 5 4.89543 5 6C5 7.10457 5.89543 8 7 8H21V21C21 21.5523 20.5523 22 20 22H7C4.79086 22 3 20.2091 3 18V6C3 3.79086 4.79086 2 7 2H20C20.5523 2 21 2.44772 21 3V4ZM5 18C5 19.1046 5.89543 20 7 20H19V10H7C6.27143 10 5.58835 9.80521 5 9.46487V18ZM20 7H7C6.44772 7 6 6.55228 6 6C6 5.44772 6.44772 5 7 5H20V7Z"/></svg>
                Paper Reader
            </a>
            <div class="nav-links">
                <a href="https://github.com/itshen/paper_reader" target="_blank" class="nav-link">GitHub</a>
                <a href="https://github.com/itshen/paper_reader#readme" target="_blank" class="nav-link">文档</a>
                {% if is_logged_in %}
                    <a href="/test" class="nav-link">测试</a>
                    <a href="/admin" class="nav-btn">管理后台</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="container">
            <div class="badge">✨ 支持 Cherry Studio / Cursor / Claude / Kimi CLI</div>
            <h1>让 AI 助手<br><span class="gradient-text">深度阅读学术论文</span></h1>
            <p class="subtitle">
                Paper Reader 是一个符合 MCP 协议的论文搜索与阅读服务。<br>
                赋予你的 AI 助手实时搜索 arXiv 论文并阅读全文的能力。
            </p>
            <div class="hero-btns">
                <a href="#get-key" class="btn btn-primary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M13 10H20L11 23V14H4L13 1V10Z"/></svg>
                    立即使用
                </a>
                <a href="https://github.com/itshen/paper_reader" target="_blank" class="btn btn-outline">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.475 2 2 6.475 2 12C2 16.425 4.8625 20.1625 8.8375 21.4875C9.3375 21.575 9.525 21.275 9.525 21.0125C9.525 20.775 9.5125 19.9875 9.5125 19.15C7 19.6125 6.35 18.5375 6.15 17.975C6.0375 17.6875 5.55 16.8 5.125 16.5625C4.775 16.375 4.275 15.9125 5.1125 15.9C5.9 15.8875 6.4625 16.625 6.65 16.925C7.55 18.4375 8.9875 18.0125 9.5625 17.75C9.65 17.1 9.9125 16.6625 10.2 16.4125C7.975 16.1625 5.65 15.3 5.65 11.475C5.65 10.3875 6.0375 9.4875 6.675 8.7875C6.575 8.5375 6.225 7.5125 6.775 6.1375C6.775 6.1375 7.6125 5.875 9.525 7.1625C10.325 6.9375 11.175 6.825 12.025 6.825C12.875 6.825 13.725 6.9375 14.525 7.1625C16.4375 5.8625 17.275 6.1375 17.275 6.1375C17.825 7.5125 17.475 8.5375 17.375 8.7875C18.0125 9.4875 18.4 10.375 18.4 11.475C18.4 15.3125 16.0625 16.1625 13.8375 16.4125C14.2 16.725 14.5125 17.325 14.5125 18.2625C14.5125 19.6 14.5 20.675 14.5 21.0125C14.5 21.275 14.6875 21.5875 15.1875 21.4875C19.1375 20.1625 22 16.4125 22 12C22 6.475 17.525 2 12 2Z"/></svg>
                    查看源码
                </a>
            </div>
        </div>
    </section>

    <section class="features">
        <div class="container">
            <div class="section-title">
                <h2>核心能力</h2>
                <p>为你的 AI 助手插上科研的翅膀</p>
            </div>
            <div class="grid">
                <div class="card">
                    <div class="icon-box">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"/></svg>
                    </div>
                    <h3>智能搜索</h3>
                    <p>支持多维度的 arXiv 论文搜索。AI 可以根据相关性、时间进行智能排序，支持 cs.AI、cs.LG 等全部分类。</p>
                </div>
                <div class="card">
                    <div class="icon-box">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 22H5C3.34315 22 2 20.6569 2 19V3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V15H22V19C22 20.6569 20.6569 22 19 22ZM18 17V19C18 19.5523 18.4477 20 19 20C19.5523 20 20 19.5523 20 19V17H18ZM16 20V4H4V19C4 19.5523 4.44772 20 5 20H16ZM6 7H14V9H6V7ZM6 11H14V13H6V11ZM6 15H11V17H6V15Z"/></svg>
                    </div>
                    <h3>全文阅读</h3>
                    <p>自动将 PDF 转换为 Markdown 格式。支持分页读取，智能适配上下文窗口，只读取最关键的部分。</p>
                </div>
                <div class="card">
                    <div class="icon-box">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM13 12H17V14H11V7H13V12Z"/></svg>
                    </div>
                    <h3>智能缓存</h3>
                    <p>内置 LRU 缓存系统。自动缓存已下载的论文，避免重复下载，极大提升响应速度。</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 对话演示 -->
    <section class="demo-section">
        <div class="container">
            <div class="section-title">
                <h2>实际效果</h2>
                <p>看看 AI 助手如何帮你搜索和阅读论文</p>
            </div>
            <div class="demo-chat" id="demoChat">
                <!-- JS 动态生成内容 -->
            </div>
        </div>
    </section>

    <script>
        // 演示脚本数据 - 自动播放流程
        const demoScript = [
            { type: 'user', text: '最近 DeepSeek 的 mHC 论文讲的是啥？' },
            { type: 'tool', name: 'search_papers', args: 'query="DeepSeek mHC", sort_by="date"' },
            { 
                type: 'ai', 
                text: '为您找到以下相关论文：\n\n**1. mHC: Manifold-Constrained Hyper-Connections**\n   *arXiv: 2512.24880 · 2025-12-31*\n   DeepSeek 团队提出的一种针对超连接架构的改进框架，解决了训练不稳定性。\n\n**2. mHC-GNN: Manifold-Constrained Hyper-Connections for GNN**\n   *arXiv: 2601.02451 · 2026-01-05*\n   将流形约束超连接应用于图神经网络。' 
            },
            { type: 'user', text: '帮我读一下第一篇的核心方法' },
            { type: 'tool', name: 'get_paper_content', args: 'id="2512.24880"' },
            { 
                type: 'ai', 
                text: '根据论文 **mHC (2512.24880)** 的全文内容：\n\n**核心方法：**\nmHC 利用 **Sinkhorn-Knopp 算法**将超连接的残差矩阵投影到 **Birkhoff 多面体**上，强制其成为**双稳态随机矩阵**（Doubly Stochastic Matrix）。\n\n**作用：**\n这种约束确保了残差流在多层传递中保持**能量守恒**（Feature Mean Conservation），从根本上解决了原始 Hyper-Connections 导致的梯度爆炸问题，同时保持了模型的性能优势。' 
            }
        ];

        const chatContainer = document.getElementById('demoChat');
        let hasPlayed = false;

        async function playDemo() {
            if (hasPlayed) return;
            hasPlayed = true;
            chatContainer.innerHTML = ''; // 清空

            for (const step of demoScript) {
                if (step.type === 'tool') {
                    // 工具调用展示：先显示运行中，后变为完成
                    const toolId = await showToolCall(step.name, step.args);
                    await new Promise(r => setTimeout(r, 1000)); // 模拟网络延迟
                    finishToolCall(toolId);
                    await new Promise(r => setTimeout(r, 400));
                } else {
                    await showMessage(step.type, step.text);
                    await new Promise(r => setTimeout(r, 1000)); // 阅读时间
                }
            }
        }

        async function showToolCall(name, args) {
            const id = 'tool-' + Date.now();
            const html = `
                <div class="chat-message ai" id="${id}">
                    <div class="chat-avatar ai-avatar">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 4H7C5.89543 4 5 4.89543 5 6C5 7.10457 5.89543 8 7 8H21V21C21 21.5523 20.5523 22 20 22H7C4.79086 22 3 20.2091 3 18V6C3 3.79086 4.79086 2 7 2H20C20.5523 2 21 2.44772 21 3V4ZM5 18C5 19.1046 5.89543 20 7 20H19V10H7C6.27143 10 5.58835 9.80521 5 9.46487V18ZM20 7H7C6.44772 7 6 6.55228 6 6C6 5.44772 6.44772 5 7 5H20V7Z"/></svg>
                    </div>
                    <div class="chat-content-wrapper">
                        <div class="tool-call">
                            <div class="tool-call-left">
                                <div class="tool-icon">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M13 10H20L11 23V14H4L13 1V10Z"/></svg>
                                </div>
                                <span class="tool-name">${name}</span>
                                <span class="tool-args">(${args})</span>
                            </div>
                            <div class="tool-status status-running">
                                <div class="spinner"></div>
                                <span>Running</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            chatContainer.insertAdjacentHTML('beforeend', html);
            scrollToBottom();
            return id;
        }

        function finishToolCall(id) {
            const el = document.getElementById(id);
            if (el) {
                const statusEl = el.querySelector('.tool-status');
                statusEl.className = 'tool-status status-done';
                statusEl.innerHTML = `
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M10 15.172L9.19239 14.3644L10 15.172ZM10 15.172L19.1924 5.97961L20.6066 7.39382L10 18L3.63604 11.636L5.05025 10.2218L10 15.172Z"/></svg>
                    <span>Done</span>
                `;
            }
        }

        async function showMessage(type, text) {
            const isUser = type === 'user';
            const avatar = isUser ? '我' : 'AI';
            const avatarClass = isUser ? 'user-avatar' : 'ai-avatar';
            const avatarIcon = isUser ? '' : '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"/></svg>'; 
            const msgId = 'msg-' + Date.now();
            
            // AI 头像在左，用户头像在右
            const avatarHtml = `
                <div class="chat-avatar ${avatarClass}">
                    ${isUser ? '我' : avatarIcon}
                </div>
            `;

            const html = `
                <div class="chat-message ${type}">
                    ${!isUser ? avatarHtml : ''}
                    <div class="chat-content-wrapper">
                        <div class="chat-bubble" id="${msgId}"></div>
                    </div>
                    ${isUser ? avatarHtml : ''}
                </div>
            `;
            chatContainer.insertAdjacentHTML('beforeend', html);
            scrollToBottom();
            
            // 打字机效果
            const bubble = document.getElementById(msgId);
            const parsedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
            
            if (isUser) {
                bubble.innerHTML = parsedText;
            } else {
                // AI 消息逐字显示
                const plainText = text.replace(/\*\*/g, '');
                // 快速显示前几个字避免空白
                bubble.innerHTML = '<span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>';
                await new Promise(r => setTimeout(r, 600)); // 思考时间
                bubble.innerHTML = '';
                
                let currentHtml = '';
                // 简单的逐字逻辑，保留加粗标记
                // 为了演示流畅，这里简化处理，实际可以使用更复杂的 parser
                const chunks = text.split(/(\*\*.*?\*\*|\n)/g); // 按加粗和换行分割
                
                for (const chunk of chunks) {
                    if (chunk === '\n') {
                        currentHtml += '<br>';
                        bubble.innerHTML = currentHtml;
                        scrollToBottom();
                    } else if (chunk.startsWith('**')) {
                        const content = chunk.replace(/\*\*/g, '');
                        currentHtml += `<strong>${content}</strong>`;
                        bubble.innerHTML = currentHtml;
                        scrollToBottom();
                        await new Promise(r => setTimeout(r, 50));
                    } else if (chunk) {
                        for (let i = 0; i < chunk.length; i++) {
                            currentHtml += chunk[i];
                            bubble.innerHTML = currentHtml;
                            if (i % 5 === 0) scrollToBottom(); // 每5个字滚动一次
                            await new Promise(r => setTimeout(r, 15));
                        }
                    }
                }
            }
            scrollToBottom();
        }

        function scrollToBottom() {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // 启动演示
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !hasPlayed) {
                    playDemo();
                }
            });
        }, { threshold: 0.3 });
        
        observer.observe(chatContainer);
    </script>

    <!-- 获取 Key -->
    <section class="cta-section" id="get-key">
        <div class="container">
            <div class="cta-box">
                <h2>立即使用</h2>
                <p>无需自行部署，关注公众号免费获取 API Key</p>
                
                <div class="qr-code">
                    <img src="/static/image/wechat_qr.jpg" alt="洛小山公众号">
                </div>
                
                <p style="margin-bottom: 0;">
                    扫码关注「<strong>洛小山</strong>」，后台回复「<strong>阅读论文</strong>」<br>
                    <small style="color: var(--text-tertiary)">即可获取免费 API Key，在 Cursor / Cherry Studio / Kimi CLI 中直接配置使用</small>
                </p>
            </div>
        </div>
    </section>

    <!-- 自行部署 -->
    <section class="deploy-section">
        <div class="container steps">
            <div class="section-title">
                <h2>自行部署</h2>
                <p>如果你更喜欢掌控一切，也可以在自己的服务器上运行</p>
            </div>
            
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-content" style="flex:1">
                    <h3>克隆仓库</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode('git clone https://github.com/itshen/paper_reader.git')">复制</button>
                        <pre>git clone https://github.com/itshen/paper_reader.git</pre>
                    </div>
                </div>
            </div>

            <div class="step">
                <div class="step-num">2</div>
                <div class="step-content" style="flex:1">
                    <h3>安装并运行</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode('cd paper_reader\npip install -r requirements.txt\npython server.py')">复制</button>
                        <pre>cd paper_reader
pip install -r requirements.txt
python server.py</pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="https://github.com/itshen/paper_reader" target="_blank">GitHub</a>
                <a href="https://github.com/itshen/paper_reader#readme" target="_blank">文档</a>
                <a href="https://github.com/itshen/paper_reader/issues" target="_blank">反馈</a>
            </div>
            <div class="copyright">
                Copyright © 2025 Miyang Tech (Zhuhai Hengqin) Co., Ltd. | MIT License
            </div>
        </div>
    </footer>

    <script>
        function copyCode(text) {
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '已复制';
                setTimeout(() => btn.textContent = originalText, 2000);
            });
        }
    </script>
</body>
</html>
